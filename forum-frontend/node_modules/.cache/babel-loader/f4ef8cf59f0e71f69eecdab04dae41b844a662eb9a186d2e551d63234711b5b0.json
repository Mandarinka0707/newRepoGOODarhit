{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useEffect } from 'react';\nconst {\n  messages,\n  sendMessage\n} = useWebSocket('ws://localhost:3000/websocket');\nconst useWebSocket = url => {\n  _s();\n  const [socket, setSocket] = useState(null);\n  const [messages, setMessages] = useState([]);\n  useEffect(() => {\n    const ws = new WebSocket(url);\n    ws.onopen = () => {\n      console.log('WebSocket connected');\n      setSocket(ws);\n    };\n    ws.onmessage = event => {\n      const newMessage = JSON.parse(event.data);\n      setMessages(prev => [...prev, newMessage]);\n    };\n    ws.onclose = () => {\n      console.log('WebSocket disconnected');\n      setSocket(null);\n    };\n    ws.onerror = error => {\n      console.error('WebSocket error:', error);\n    };\n    return () => {\n      if (ws.readyState === WebSocket.OPEN) {\n        ws.close();\n      }\n    };\n  }, [url]);\n  const sendMessage = message => {\n    if (socket && socket.readyState === WebSocket.OPEN) {\n      socket.send(JSON.stringify(message));\n    }\n  };\n  return {\n    socket,\n    messages,\n    sendMessage\n  };\n};\n_s(useWebSocket, \"gJXfAnJSbZ0cmlVFRlK2OM0vmjE=\");\nexport default useWebSocket;","map":{"version":3,"names":["useState","useEffect","messages","sendMessage","useWebSocket","url","_s","socket","setSocket","setMessages","ws","WebSocket","onopen","console","log","onmessage","event","newMessage","JSON","parse","data","prev","onclose","onerror","error","readyState","OPEN","close","message","send","stringify"],"sources":["/Users/darinautalieva/Desktop/GOProject/forum-frontend/src/hooks/useWebSocket.js"],"sourcesContent":["import { useState, useEffect } from 'react';\nconst { messages, sendMessage } = useWebSocket('ws://localhost:3000/websocket');\nconst useWebSocket = (url) => {\n    const [socket, setSocket] = useState(null);\n    const [messages, setMessages] = useState([]);\n\n    useEffect(() => {\n        const ws = new WebSocket(url);\n        \n        ws.onopen = () => {\n            console.log('WebSocket connected');\n            setSocket(ws);\n        };\n\n        ws.onmessage = (event) => {\n            const newMessage = JSON.parse(event.data);\n            setMessages(prev => [...prev, newMessage]);\n        };\n\n        ws.onclose = () => {\n            console.log('WebSocket disconnected');\n            setSocket(null);\n        };\n\n        ws.onerror = (error) => {\n            console.error('WebSocket error:', error);\n        };\n\n        return () => {\n            if (ws.readyState === WebSocket.OPEN) {\n                ws.close();\n            }\n        };\n    }, [url]);\n\n    const sendMessage = (message) => {\n        if (socket && socket.readyState === WebSocket.OPEN) {\n            socket.send(JSON.stringify(message));\n        }\n    };\n\n    return { socket, messages, sendMessage };\n};\n\nexport default useWebSocket;"],"mappings":";AAAA,SAASA,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAC3C,MAAM;EAAEC,QAAQ;EAAEC;AAAY,CAAC,GAAGC,YAAY,CAAC,+BAA+B,CAAC;AAC/E,MAAMA,YAAY,GAAIC,GAAG,IAAK;EAAAC,EAAA;EAC1B,MAAM,CAACC,MAAM,EAAEC,SAAS,CAAC,GAAGR,QAAQ,CAAC,IAAI,CAAC;EAC1C,MAAM,CAACE,QAAQ,EAAEO,WAAW,CAAC,GAAGT,QAAQ,CAAC,EAAE,CAAC;EAE5CC,SAAS,CAAC,MAAM;IACZ,MAAMS,EAAE,GAAG,IAAIC,SAAS,CAACN,GAAG,CAAC;IAE7BK,EAAE,CAACE,MAAM,GAAG,MAAM;MACdC,OAAO,CAACC,GAAG,CAAC,qBAAqB,CAAC;MAClCN,SAAS,CAACE,EAAE,CAAC;IACjB,CAAC;IAEDA,EAAE,CAACK,SAAS,GAAIC,KAAK,IAAK;MACtB,MAAMC,UAAU,GAAGC,IAAI,CAACC,KAAK,CAACH,KAAK,CAACI,IAAI,CAAC;MACzCX,WAAW,CAACY,IAAI,IAAI,CAAC,GAAGA,IAAI,EAAEJ,UAAU,CAAC,CAAC;IAC9C,CAAC;IAEDP,EAAE,CAACY,OAAO,GAAG,MAAM;MACfT,OAAO,CAACC,GAAG,CAAC,wBAAwB,CAAC;MACrCN,SAAS,CAAC,IAAI,CAAC;IACnB,CAAC;IAEDE,EAAE,CAACa,OAAO,GAAIC,KAAK,IAAK;MACpBX,OAAO,CAACW,KAAK,CAAC,kBAAkB,EAAEA,KAAK,CAAC;IAC5C,CAAC;IAED,OAAO,MAAM;MACT,IAAId,EAAE,CAACe,UAAU,KAAKd,SAAS,CAACe,IAAI,EAAE;QAClChB,EAAE,CAACiB,KAAK,CAAC,CAAC;MACd;IACJ,CAAC;EACL,CAAC,EAAE,CAACtB,GAAG,CAAC,CAAC;EAET,MAAMF,WAAW,GAAIyB,OAAO,IAAK;IAC7B,IAAIrB,MAAM,IAAIA,MAAM,CAACkB,UAAU,KAAKd,SAAS,CAACe,IAAI,EAAE;MAChDnB,MAAM,CAACsB,IAAI,CAACX,IAAI,CAACY,SAAS,CAACF,OAAO,CAAC,CAAC;IACxC;EACJ,CAAC;EAED,OAAO;IAAErB,MAAM;IAAEL,QAAQ;IAAEC;EAAY,CAAC;AAC5C,CAAC;AAACG,EAAA,CAxCIF,YAAY;AA0ClB,eAAeA,YAAY","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}