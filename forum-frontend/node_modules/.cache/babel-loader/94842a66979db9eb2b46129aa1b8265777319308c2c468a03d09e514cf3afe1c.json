{"ast":null,"code":"import{useState,useEffect}from'react';const useWebSocket=url=>{const[socket,setSocket]=useState(null);const[messages,setMessages]=useState([]);useEffect(()=>{const ws=new WebSocket(url);ws.onopen=()=>{console.log('WebSocket connected');setSocket(ws);};ws.onmessage=event=>{const newMessage=JSON.parse(event.data);setMessages(prev=>[...prev,newMessage]);};ws.onclose=()=>{console.log('WebSocket disconnected');setSocket(null);};ws.onerror=error=>{console.error('WebSocket error:',error);};return()=>{if(ws.readyState===WebSocket.OPEN){ws.close();}};},[url]);const sendMessage=message=>{if(socket&&socket.readyState===WebSocket.OPEN){socket.send(JSON.stringify(message));}};return{socket,messages,sendMessage};};export default useWebSocket;","map":{"version":3,"names":["useState","useEffect","useWebSocket","url","socket","setSocket","messages","setMessages","ws","WebSocket","onopen","console","log","onmessage","event","newMessage","JSON","parse","data","prev","onclose","onerror","error","readyState","OPEN","close","sendMessage","message","send","stringify"],"sources":["/Users/darinautalieva/Desktop/GOProject/forum-frontend/src/hooks/useWebSocket.js"],"sourcesContent":["import { useState, useEffect } from 'react';\nconst useWebSocket = (url) => {\n    const [socket, setSocket] = useState(null);\n    const [messages, setMessages] = useState([]);\n\n    useEffect(() => {\n        const ws = new WebSocket(url);\n        \n        ws.onopen = () => {\n            console.log('WebSocket connected');\n            setSocket(ws);\n        };\n\n        ws.onmessage = (event) => {\n            const newMessage = JSON.parse(event.data);\n            setMessages(prev => [...prev, newMessage]);\n        };\n\n        ws.onclose = () => {\n            console.log('WebSocket disconnected');\n            setSocket(null);\n        };\n\n        ws.onerror = (error) => {\n            console.error('WebSocket error:', error);\n        };\n\n        return () => {\n            if (ws.readyState === WebSocket.OPEN) {\n                ws.close();\n            }\n        };\n    }, [url]);\n\n    const sendMessage = (message) => {\n        if (socket && socket.readyState === WebSocket.OPEN) {\n            socket.send(JSON.stringify(message));\n        }\n    };\n\n    return { socket, messages, sendMessage };\n};\n\nexport default useWebSocket;"],"mappings":"AAAA,OAASA,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAC3C,KAAM,CAAAC,YAAY,CAAIC,GAAG,EAAK,CAC1B,KAAM,CAACC,MAAM,CAAEC,SAAS,CAAC,CAAGL,QAAQ,CAAC,IAAI,CAAC,CAC1C,KAAM,CAACM,QAAQ,CAAEC,WAAW,CAAC,CAAGP,QAAQ,CAAC,EAAE,CAAC,CAE5CC,SAAS,CAAC,IAAM,CACZ,KAAM,CAAAO,EAAE,CAAG,GAAI,CAAAC,SAAS,CAACN,GAAG,CAAC,CAE7BK,EAAE,CAACE,MAAM,CAAG,IAAM,CACdC,OAAO,CAACC,GAAG,CAAC,qBAAqB,CAAC,CAClCP,SAAS,CAACG,EAAE,CAAC,CACjB,CAAC,CAEDA,EAAE,CAACK,SAAS,CAAIC,KAAK,EAAK,CACtB,KAAM,CAAAC,UAAU,CAAGC,IAAI,CAACC,KAAK,CAACH,KAAK,CAACI,IAAI,CAAC,CACzCX,WAAW,CAACY,IAAI,EAAI,CAAC,GAAGA,IAAI,CAAEJ,UAAU,CAAC,CAAC,CAC9C,CAAC,CAEDP,EAAE,CAACY,OAAO,CAAG,IAAM,CACfT,OAAO,CAACC,GAAG,CAAC,wBAAwB,CAAC,CACrCP,SAAS,CAAC,IAAI,CAAC,CACnB,CAAC,CAEDG,EAAE,CAACa,OAAO,CAAIC,KAAK,EAAK,CACpBX,OAAO,CAACW,KAAK,CAAC,kBAAkB,CAAEA,KAAK,CAAC,CAC5C,CAAC,CAED,MAAO,IAAM,CACT,GAAId,EAAE,CAACe,UAAU,GAAKd,SAAS,CAACe,IAAI,CAAE,CAClChB,EAAE,CAACiB,KAAK,CAAC,CAAC,CACd,CACJ,CAAC,CACL,CAAC,CAAE,CAACtB,GAAG,CAAC,CAAC,CAET,KAAM,CAAAuB,WAAW,CAAIC,OAAO,EAAK,CAC7B,GAAIvB,MAAM,EAAIA,MAAM,CAACmB,UAAU,GAAKd,SAAS,CAACe,IAAI,CAAE,CAChDpB,MAAM,CAACwB,IAAI,CAACZ,IAAI,CAACa,SAAS,CAACF,OAAO,CAAC,CAAC,CACxC,CACJ,CAAC,CAED,MAAO,CAAEvB,MAAM,CAAEE,QAAQ,CAAEoB,WAAY,CAAC,CAC5C,CAAC,CAED,cAAe,CAAAxB,YAAY","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}